(this["webpackJsonpapra-test"]=this["webpackJsonpapra-test"]||[]).push([[0],{123:function(n,e,t){},137:function(n,e,t){"use strict";t.r(e);var a,i,c,r,o,j,s,l,d,b,h,u,O,p,x,g,f,m=t(0),w=t.n(m),y=t(17),v=t.n(y),k=(t(123),t(85)),C=t(78),P=t(183),S=t(182),M=t(109),U=t.n(M),q=t(18),A=t(19),Q=t(176),T=t(180),z=t(181),I=t(189),K=A.a.div(a||(a=Object(q.a)(["\n  margin-top: 60px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 0 60px;\n\n  @media (max-width: 768px) {\n    padding: 8px;\n  }\n"]))),D=Object(A.a)(Q.a)(i||(i=Object(q.a)(["\n  width: 100%;\n"]))),E=Object(A.a)(T.a)(c||(c=Object(q.a)(["\n  cursor: pointer;\n"]))),J=A.a.img(r||(r=Object(q.a)(["\n  height: 60px;\n"]))),$=Object(A.a)(z.a)(o||(o=Object(q.a)(["\n  margin-top: 60px;\n\n  @media (max-width: 768px) {\n    margin-top: 16px;\n  }\n"]))),B=A.a.div(j||(j=Object(q.a)(["\n  width: 100%;\n"]))),L=Object(A.a)(I.a)(s||(s=Object(q.a)(["\n  .MuiTablePagination-spacer + .MuiTablePagination-caption {\n    display: none;\n  }\n  .MuiTablePagination-input {\n    display: none;\n  }\n"]))),F=t(8),G=function(n){var e=n.keyword,t=n.setKeyword,a=n.doSearch;return Object(F.jsx)(B,{children:Object(F.jsx)(D,{placeholder:"Search keywords on title",onKeyDown:function(n){"Enter"===n.key&&a()},endAdornment:Object(F.jsx)(P.a,{position:"end",children:Object(F.jsx)(S.a,{"aria-label":"search",onClick:a,children:Object(F.jsx)(U.a,{})})}),value:e,onChange:function(n){return t(n.target.value)}})})},H=t(185),N=t(186),R=t(36),V=t(184),W=A.a.div(l||(l=Object(q.a)(["\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  padding-top: 200px;\n"]))),X=function(){return Object(F.jsx)(W,{children:Object(F.jsx)(V.a,{})})},Y=A.a.div(d||(d=Object(q.a)(["\n  width: 100%;\n  color: red;\n"]))),Z=function(n){var e=n.message,t=void 0===e?"Unknown error happened.":e;return Object(F.jsxs)(Y,{children:[t," Please try again later."]})},_=t(110),nn=t.n(_),en=t(190),tn=Object(A.a)(en.a)(b||(b=Object(q.a)(["\n  width: 100vw;\n"]))),an=A.a.div(h||(h=Object(q.a)(["\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: center;\n  outline: none;\n  position: relative;\n"]))),cn=Object(A.a)(S.a)(u||(u=Object(q.a)(["\n  position: absolute !important;\n  top: 16px;\n  right: 16px;\n\n  @media (max-width: 768px) {\n    top: 8px;\n    right: 8px;\n  }\n"]))),rn=A.a.img(O||(O=Object(q.a)(["\n  object-fit: contain;\n\n  @media (max-width: 768px) {\n    width: 100%;\n  }\n"]))),on=function(n){var e=n.imageUrl,t=n.onClose;return Object(F.jsx)(tn,{open:!!e,onClose:t,children:Object(F.jsxs)(an,{children:[Object(F.jsx)(cn,{onClick:t,children:Object(F.jsx)(nn.a,{fontSize:"large",htmlColor:"white"})}),Object(F.jsx)(rn,{src:e,alt:""})]})})},jn=t(187),sn=t(188),ln=10,dn=Object(R.gql)(p||(p=Object(q.a)(['\n  query allPhotosQuery($options: PageQueryOptions) {\n    photos(options: $options) @connection(key: "photos") {\n      data {\n        id\n        title\n        url\n        thumbnailUrl\n      }\n      meta {\n        totalCount\n      }\n    }\n  }\n']))),bn=function(){var n=Object(m.useState)(0),e=Object(C.a)(n,2),t=e[0],a=e[1],i=Object(m.useState)(),c=Object(C.a)(i,2),r=c[0],o=c[1],j=Object(m.useState)(""),s=Object(C.a)(j,2),l=s[0],d=s[1],b=function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return{options:{paginate:{page:n,limit:ln},search:{q:e}}}},h=Object(R.useQuery)(dn,{variables:b(1)}),u=h.loading,O=h.error,p=h.data,x=h.fetchMore,g=h.refetch,f=h.client;if(u)return Object(F.jsx)(X,{});if(O)return Object(F.jsx)(Z,{});var w=p.photos,y=t*ln,v=w.data.slice(y,y+ln);return Object(F.jsxs)(K,{children:[Object(F.jsx)(G,{keyword:l,setKeyword:d,doSearch:function(){return f.cache.reset().then((function(){f.clearStore().then((function(){g(b(1,l)).then((function(){return a(0)}))}))}))}}),Object(F.jsxs)($,{children:[Object(F.jsx)(H.a,{children:Object(F.jsxs)(N.a,{children:[Object(F.jsx)(T.a,{children:"ID"}),Object(F.jsx)(T.a,{children:"Title"}),Object(F.jsx)(T.a,{children:"Photo"})]})}),Object(F.jsx)(jn.a,{children:v.map((function(n){return Object(F.jsxs)(N.a,{children:[Object(F.jsx)(E,{onClick:function(){return o(n.url)},children:n.id}),Object(F.jsx)(T.a,{children:n.title}),Object(F.jsx)(E,{onClick:function(){return o(n.url)},children:Object(F.jsx)(J,{src:n.thumbnailUrl,alt:n.title})})]},n.id)}))}),Object(F.jsx)(sn.a,{children:Object(F.jsx)(N.a,{children:Object(F.jsx)(L,{count:w.meta.totalCount,page:t,onChangePage:function(n,e){e*ln>=w.data.length?x({variables:b(t+2,l)}).then((function(){return a(e)})):a(e)},rowsPerPage:ln})})})]}),Object(F.jsx)(on,{imageUrl:r,onClose:function(){return o(void 0)}})]})},hn=A.a.div(x||(x=Object(q.a)([""]))),un=A.a.main(g||(g=Object(q.a)(["\n  max-width: 1024px;\n  margin: auto;\n"]))),On=A.a.header(f||(f=Object(q.a)(["\n  width: 100%;\n  height: 100px;\n  background-color: #5079ba;\n  color: white;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 32px;\n  font-weight: bold;\n"]))),pn=new R.ApolloClient({uri:"https://graphqlzero.almansi.me/api",cache:new R.InMemoryCache({typePolicies:{Query:{fields:{photos:{keyArgs:!1,merge:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:[]},e=arguments.length>1?arguments[1]:void 0;return Object.assign({},e,{data:[].concat(Object(k.a)(n.data),Object(k.a)(e.data))})}}}}}})}),xn=function(){return Object(F.jsx)(R.ApolloProvider,{client:pn,children:Object(F.jsxs)(hn,{children:[Object(F.jsx)(On,{children:"Photo List"}),Object(F.jsx)(un,{children:Object(F.jsx)(bn,{})})]})})};v.a.render(Object(F.jsx)(w.a.StrictMode,{children:Object(F.jsx)(xn,{})}),document.getElementById("root"))}},[[137,1,2]]]);
//# sourceMappingURL=main.7b4b1eb0.chunk.js.map